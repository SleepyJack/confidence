<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Confidence Calibration Game</title>
  <link rel="stylesheet" href="styles/main.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header>
      <h1>Confidence Calibration Game</h1>
      <p class="subtitle">Test and improve your estimation accuracy</p>
    </header>

    <!-- Main content area -->
    <div class="main-content">
      <!-- Left side: Question/Feedback -->
      <div class="game-area">
        <!-- Question Container -->
        <div id="question-container" class="card">
          <div class="question-section">
            <h2 id="question-text">Loading question...</h2>
          </div>

          <div class="input-section">
            <div class="input-group">
              <label for="low-input">Low Bound:</label>
              <input type="number" id="low-input" placeholder="Enter minimum value" step="any">
            </div>

            <div class="input-group">
              <label for="high-input">High Bound:</label>
              <input type="number" id="high-input" placeholder="Enter maximum value" step="any">
            </div>

            <div class="input-group slider-group">
              <label for="confidence-slider">
                Confidence: <span id="confidence-value">80%</span>
              </label>
              <input type="range" id="confidence-slider" min="50" max="99" value="80" step="1">
              <div class="slider-labels">
                <span>50%</span>
                <span>99%</span>
              </div>
            </div>

            <button id="submit-btn" class="btn btn-primary">Submit Answer</button>
          </div>
        </div>

        <!-- Feedback Container -->
        <div id="feedback-container" class="card">
          <div class="feedback-section">
            <p id="feedback-text" class="feedback-message"></p>
            <p id="correct-answer" class="correct-answer-text"></p>

            <div class="distribution-container">
              <h4>Your Probability Distribution</h4>
              <canvas id="distribution-canvas" width="500" height="180"></canvas>
            </div>
          </div>

          <button id="next-btn" class="btn btn-primary">Next Question</button>
        </div>
      </div>

      <!-- Right side: Stats -->
      <div class="stats-area">
        <div class="card">
          <h3>Your Statistics</h3>

          <!-- Primary Metric: Calibration Score -->
          <div class="primary-metric">
            <div class="metric-icon">ðŸŽ¯</div>
            <div class="metric-content">
              <div class="metric-label">Calibration Score</div>
              <div class="metric-value" id="stats-score">-</div>
              <div class="metric-hint">Higher is better</div>
            </div>
          </div>

          <!-- Secondary Metric: Calibration Bias -->
          <div class="secondary-metric">
            <div class="metric-icon">ðŸ“Š</div>
            <div class="metric-content">
              <div class="metric-label">Calibration Bias</div>
              <div class="metric-row">
                <span class="metric-value" id="stats-bias">-</span>
                <span class="metric-status" id="stats-status">No data yet</span>
              </div>
              <div class="metric-hint">Aim for 0%</div>
            </div>
          </div>

          <div class="stats-divider"></div>

          <!-- Tertiary Metrics -->
          <div class="tertiary-metrics">
            <div class="tertiary-item">
              <span class="tertiary-label">Questions:</span>
              <span class="tertiary-value" id="stats-total">0</span>
            </div>
            <div class="tertiary-item">
              <span class="tertiary-label">Accuracy:</span>
              <span class="tertiary-value" id="stats-accuracy">-</span>
            </div>
            <div class="tertiary-item">
              <span class="tertiary-label">Avg Confidence:</span>
              <span class="tertiary-value" id="stats-avg-confidence">-</span>
            </div>
          </div>

          <!-- Chart -->
          <div class="chart-container">
            <h4>Progress Over Time</h4>
            <canvas id="chart-canvas" width="400" height="200"></canvas>
          </div>

          <button id="reset-btn" class="btn btn-secondary">Reset Progress</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Welcome Modal -->
  <div id="welcome-modal" class="modal">
    <div class="modal-content">
      <h2>Welcome to the Confidence Calibration Game!</h2>

      <div class="instructions">
        <h3>How to Play:</h3>
        <ol>
          <li><strong>Read the question</strong> - You'll be asked to estimate a numerical value</li>
          <li><strong>Set your range</strong> - Enter a low and high bound that you think contains the correct answer</li>
          <li><strong>Choose confidence</strong> - Use the slider to indicate your confidence level (50-99%)</li>
          <li><strong>Submit</strong> - See if you were correct and track your calibration over time</li>
        </ol>

        <h3>What is Calibration?</h3>
        <p>
          Good calibration means your confidence matches your accuracy. For example, if you say you're
          80% confident, you should be correct about 80% of the time. This game helps you learn if
          you're overconfident, underconfident, or well-calibrated.
        </p>

        <h3>Tips:</h3>
        <ul>
          <li>Be honest with yourself about what you know and don't know</li>
          <li>Wider ranges = higher confidence, narrower ranges = lower confidence</li>
          <li>Track your progress over time to see if you're improving</li>
        </ul>
      </div>

      <button id="start-btn" class="btn btn-primary btn-large">Start Playing</button>
    </div>
  </div>

  <!-- Load JavaScript modules -->
  <script src="js/storage.js"></script>
  <script src="js/scoring.js"></script>
  <script src="js/chart.js"></script>
  <script src="js/distribution.js"></script>
  <script src="js/game.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/main.js"></script>
</body>
</html>
